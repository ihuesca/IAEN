language: r

sudo: required
dist: trusty
cache:
  - packages
  - ccache
  
r:
 - 3.4
 - 3.5
 - 3.6
 - oldrel
 - release
 - devel
 
 before_install:
  - sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable --yes
  - sudo add-apt-repository -y ppa:cran/jq --yes
  - sudo apt-get -qq update
  - sudo apt-get install -y libgdal-dev libproj-dev r-cran-ncdf4 libpoppler-cpp-dev
  - sudo apt-get install -y gdal-bin
  - sudo apt-get install -y aria2
  - PATH="/usr/local/gdal/bin:$PATH"
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
 
 apt_packages:
    - libgdal-dev
    - libproj-dev
    - libcairo2-dev
    - libatk1.0-dev
    - libpango1.0-dev
    - libgtk2.0-dev
    - libglib2.0-dev
    - libcurl4-openssl-dev
    - libudunits2-dev
    
r_binary_packages:
    - cairoDevice
    - RGtk2
    
matrix:
  allow_failures:
    - r: 3.4
    
r_github_packages: 
  - quicklizard99/cheddar

repos:
  CRAN: https://cloud.r-project.org
  ropensci: http://packages.ropensci.org
  
warnings_are_errors: false
r_build_args: "--no-manual"
r_check_args: "--no-manual --as-cran"
